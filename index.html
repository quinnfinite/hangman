<!DOCTYPE html>
<head>
<link rel='stylesheet' href='./stylesheet.css'>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src='./hangman.js'></script>
</head>
<body>
  <h1>Hangman</h1>
  <!--load the board-->
  <div id="board-container">
    <div id='board'>

    </div>
    <input id='guess' type='text'>
    <button class='guess-button'>Guess</button>
  </div>
  <div id="previous-guess-container"></div>



  <!----->
<script>
$('document').ready(function () {
  var game = new Hangman();
  var answer = game._answer;

  var $board = $('#board')
  var $body = $('body')
  //Temporary
  //game._guessedLetters = ['a', 'b', 'c']
  $('<h1></h1>').text(answer).prependTo($body);

  var $previousGuesses = game._guessedLetters;
  var $previousGuessContainer = $('#previous-guess-container');

//


//Input guesses
$('.guess-button').on('click', function(){
  console.log('guess made');
  //get the letter from the input
  var guess = $('#guess').val()
  //invoke the pass that input to the guessing function
  console.log('Guess: ', guess);
  //the below function works when passed a letter
  game.guess(guess);
  loadBoard();
  loadPrev();
})

//load correctly guessed letters

//breaking at multiple words - 1st letter
var loadBoard = function () {
  //remove everything in board
  $board.empty()

  answer.forEach(function(word) {
    var chars = word.split('');
    //div for word
    var $word = $('<div class="word"></div>');
    $word.appendTo($board);
    chars.forEach(function(char) {
      //if char isn't in the
      console.log(char);
      var $letter = $('<p class="letter"></p>');
      var indexOf = $previousGuesses.indexOf(char);
      console.log(indexOf);
      if(indexOf>=0){
        $letter.text(char);
      } else {
        $letter.text('___');
      }

      $letter.appendTo($word);

    });

  })


}

//appending Previous guesses
var loadPrev = function () {
//START
  //wipe the container
  $previousGuessContainer.empty();
  //reload it
  $previousGuesses.forEach(function (letter) {
  var $prevGuess = $('<p></p>');
  $prevGuess.text(letter);
  $prevGuess.appendTo($previousGuessContainer);
  });

//END
}

//LOAD THE BOARD
loadBoard();

});
</script>
</body>
</html>